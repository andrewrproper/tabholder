<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8">
	<meta 
		name="viewport" 
		content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="main.css">
  <link id="favicon" rel="icon" type="image/x-icon" />
  <title>
  	|| || 
  </title>
</head>

<body class="dark-theme">
	<div id="header">
		<div id="title-wrap-outer-1">
			<div id="title-wrap-outer-2">
				<div id="icon-svg-wrap-placeholder">
					<a id="icon-svg-link"><img id="icon-svg"/></a>
				</div>
				<div id="title-wrap-inner">
					<div id="title"> . . .  </div>
				</div>
			</div>
			<div id="toolbar">
				<button id="settings-button" 
					aria-label="Toggle Settings"
					title="Toggle Settings">&#128736;</button>
				<button id="open-button-same-title" 
					aria-label="Duplicate This Tab"
					title="Duplicate This Tab">&#8663;</button>
				<button id="open-button" 
					aria-label="Open Another Tab"
					title="Open Another Tab">&#8599;</button>
			</div>
		</div>
		<div id="header-end-internal"></div>
  </div>
	<div id="header-spacer"></div>
	
	<div id="links">
		<div id="link-buttons">
			<button id="add-link">Paste Link</button>
			<div 
			  id="bookmarklet-wrap" 
			  title="Drag this bookmarklet link to bookmarks bar, to copy any page's Link and Title. Then you can paste that on this page."
      >
			  <span
				  onclick=" alert(event.target.parentNode.title); "
				>
				bookmarklet:
			  </span>
				<a 
					id="bookmarklet-link" 
					href="

javascript: (
  async function() {
      /*
      ===========
      bookmarklet
      ===========

      Copy Current Page's URL and title as .url file (InternetShortcut file) to Clipboard

      ===========
      This JS can be pasted into a browser bookmark, instead of a URL. Then when the bookmark is
      clicked, this javascript will run on the current page. 
      Don't use double-slash comments in this, because it won't work as a bookmarklet. 
      Every line ending needs a semicolon, because as a bookmarklet it all becomes one line.
      ===========
      */

		function toaster (message) {

			const id = 'bookmarklet-toaster';
			let toasterE = document.getElementById(id);
			if ( toasterE ) toasterE.remove();

			toasterE = document.createElement('div');
			toasterE.id = id;

			toasterE.style.border = '2px solid #ccc';
			toasterE.style.backgroundColor = '#444';
			toasterE.style.color = '#eee';
			toasterE.style.fontSize = '1rem';
			toasterE.style.padding = '1rem';
			toasterE.style.margin = '1rem';
			toasterE.style.maxWidth = '40rem';
			toasterE.style.maxHeight = '30rem';
			toasterE.style.position = 'fixed';
			toasterE.style.right = '3rem';
			toasterE.style.top = '3rem';
			toasterE.style.zIndex = '20000';
			toasterE.style.overflow = 'auto';
			toasterE.style.whiteSpace = 'pre-wrap';
			toasterE.style.wordBreak = 'break-all';


			const closeE = document.createElement('button');
      closeE.addEventListener('click', function () {
				document.getElementById(id).remove(); 
			});
			closeE.innerHTML = 'x';
			closeE.style.fontWeight = 'bold';
			closeE.style.fontSize = 'larger';
			closeE.style.position = 'fixed';
			closeE.style.right = '7rem';

			toasterE.append(closeE);


			const titleE = document.createElement('div');
			titleE.innerHTML = 'CopyLinkInfo';

			titleE.style.border = '2px solid #ccc';
			titleE.style.backgroundColor = '#444';
			titleE.style.padding = '1rem';
			titleE.style.textDecoration = 'underline';
			titleE.style.fontWeight = 'bold';
			titleE.style.position = 'fixed';

			toasterE.append(titleE);

			const messageE = document.createElement('div');
			messageE.innerHTML = message;
			messageE.style.marginTop = '5rem';

			toasterE.append(messageE);

			const bodies = document.getElementsByTagName('body');
			bodies?.[0].append(toasterE);

			setTimeout(function () {
				toasterE.remove();
			}, 15000);

		}

    let titleText = document.title;
    let href = location.href;

		let headElements = document.getElementsByTagName('head');
		/*
			<meta property='og:image' content='https://introvertdear.com/wp-content/uploads/2023/08/what-ive-learned-about-being-a-quiet-introvert-in-an-extroverted-workplace.jpg' />
		*/
		const metaOgImage = headElements?.[0]?.querySelector(`meta[property='og:image']`);
		let imageHref = '';
		if ( metaOgImage ) {
			imageHref = metaOgImage.content ?? '';
		} else {
			/* get favicon */
      /* <link rel='icon' href='https://highlysensitiverefuge.com/wp-content/uploads/2021/08/HSR-favicon-options-12-150x150.png' sizes='32x32' /> */
			const iconLinks = headElements?.[0]?.querySelector(`link[rel*='*icon']`);
			imageHref = iconLinks?.[0]?.href ?? '';
		}
		if ( imageHref ) {
			try {
				const imageURL = new URL(imageHref);
			} catch {
				/* if creating a URL object failed, then set prefix */
				imageHref = new URL( imageHref, location.href ).toString();
			}
		}

    var textContent = '[InternetShortcut]\n' +
		  'URL=' + href + '\n' + 
		  'Title=' + titleText + '\n' +
		  'IconFile=' + ( imageHref ?? '' ) + '\n' + 
			'';

    try {
      await navigator.clipboard.writeText(textContent);
      toaster('Copied Link Info to Clipboard: \n\ntitle: ' + titleText + '\n\nlink: ' + href + '\n\nimage: ' + imageHref);
    } catch (err) {
      toaster('Failed to copy text to clipboard');
    }
  }
)();

				">CopyLinkInfo</a>
			</div>
		</div>
		<div id="links-title">
			Links
		</div>
		<ol id="links-list"></ol>
	</div>

	<div id="content" class="hidden">

		<div class="box">
			<label for="set-title">Title</label>
			<input tabindex = "1" id="set-title"/>
		</div>

		<div class="grid-container">

			<div class="cell">
				<label for="title-size">Title Size: <span id="title-size-value"></span> em</label>
				<input type="range" class="range" id="title-size" min="1" step="0.1" max="16"></input>
			</div>


			<div class="cell">
				<label for="open-icon-select">Icon</label>
				<button id="open-icon-select" class="icon-button"></button>
			</div>

			<div class="cell">
				<label for="icon-rotation-range">Icon Rotation: <span id="icon-rotation-range-value"></span> &deg;</label>
				<input type="range" class="range" id="icon-rotation-range" min="0" step="5" max="355"></input>
			</div>

			<div class="cell">
				<label for="icon-stroke-width">Icon Stroke Width: <span id="icon-stroke-width-value"></span></label>
				<input type="range" class="range" id="icon-stroke-width" min="0" step="0.25" max="20"></input>
			</div>



			<div class="cell">
				<label for="icon-fg-color-select">Icon FG Color</label>
				<button id="open-fg-color-select" class="icon-button"></button>
			</div>

			<div class="cell">
				<label for="icon-bg-color-select">Icon BG Color</label>
				<button id="open-bg-color-select" class="icon-button"></button>
			</div>



			<div class="cell">
				<label for="open-title-prefix-icon-select">Title Prefix Icon</label>
				<button id="open-title-prefix-icon-select" class="icon-button"></button>
			</div>

			<div class="cell">
				<label for="open-title-suffix-icon-select">Title Suffix Icon</label>
				<button id="open-title-suffix-icon-select" class="icon-button"></button>
			</div>

			<div class="cell">
				<label for="theme-switch">Page Theme</label>
				<button id="theme-switch">&#127769; Dark</button>
			</div>
		
		</div>


		<div class="float-container">

			<div class="cell-float" id="features">
				<h3>Features</h3>
				<ul>
					<li>Use this page as a separator between other tabs, in your browser. </li>
					<li>Give the page a name, if you want. The name will be shown in the browser tab, too.</li>
					<li>It works especially well with vertical tabs. </li>
					<li>Use it to separate other tabs by subject.</li>
					<li>Bookmark the page, using it as a separator between other bookmarks.</li>
				</ul>
			</div>

			<div class="float-container-end"></div>
		</div>

	</div>

	<div id="icon-select-dialog" class="hidden modal-dialog">
		<h2>Select Icon</h2>
		<button class="close-button" id="icon-select-dialog-close">x</button>
		<div class="modal-content" id="icon-select-content">

		</div>
	</div>

	<div id="color-select-dialog" class="hidden modal-dialog">
		<h2>Select Color</h2>
		<button class="close-button" id="color-select-dialog-close">x</button>
		<div class="modal-content" id="color-select-content">

		</div>
	</div>


	<script type="text/javascript" src="js/globals.js"></script>
	<script type="module" src="js/main.js"></script>
</body>

</html>
